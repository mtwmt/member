import{a as S,b as d,c as E,d as x,e as A,f as P,g as R,h as D,i as T}from"./chunk-QB3HQZGH.js";import{a as y}from"./chunk-6SR4RIGY.js";import{D as r,H as w,M as u,N as s,O as C,P as a,Q as o,R as m,V as h,X as c,Y as p,Z as l,_ as v,ga as F,oa as B,pa as b,s as f,t as _,u as g}from"./chunk-PNWZI6QW.js";function k(n,t){if(n&1&&(a(0,"div",4),_(),a(1,"svg",20),m(2,"path",21),o(),g(),a(3,"span"),l(4),o()()),n&2){let i=c();r(4),v(i.authStore.error())}}function L(n,t){n&1&&l(0," \u8ACB\u8F38\u5165\u4F7F\u7528\u8005\u540D\u7A31 ")}function M(n,t){n&1&&l(0," \u4F7F\u7528\u8005\u540D\u7A31\u81F3\u5C11\u9700\u8981 3 \u500B\u5B57\u5143 ")}function q(n,t){n&1&&l(0," \u4F7F\u7528\u8005\u540D\u7A31\u4E0D\u53EF\u8D85\u904E 50 \u500B\u5B57\u5143 ")}function G(n,t){if(n&1&&(a(0,"label",7)(1,"span",22),u(2,L,1,0),u(3,M,1,0),u(4,q,1,0),o()()),n&2){let i=c();r(2),s(!(i.username==null||i.username.errors==null)&&i.username.errors.required?2:-1),r(),s(!(i.username==null||i.username.errors==null)&&i.username.errors.minlength?3:-1),r(),s(!(i.username==null||i.username.errors==null)&&i.username.errors.maxlength?4:-1)}}function V(n,t){n&1&&l(0," \u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6 ")}function j(n,t){n&1&&l(0," \u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F\u4E0D\u6B63\u78BA ")}function I(n,t){if(n&1&&(a(0,"label",7)(1,"span",22),u(2,V,1,0),u(3,j,1,0),o()()),n&2){let i=c();r(2),s(!(i.email==null||i.email.errors==null)&&i.email.errors.required?2:-1),r(),s(!(i.email==null||i.email.errors==null)&&i.email.errors.email?3:-1)}}function z(n,t){n&1&&l(0," \u8ACB\u8F38\u5165\u5BC6\u78BC ")}function H(n,t){n&1&&l(0," \u5BC6\u78BC\u81F3\u5C11\u9700\u8981 6 \u500B\u5B57\u5143 ")}function J(n,t){if(n&1&&(a(0,"label",7)(1,"span",22),u(2,z,1,0),u(3,H,1,0),o()()),n&2){let i=c();r(2),s(!(i.password==null||i.password.errors==null)&&i.password.errors.required?2:-1),r(),s(!(i.password==null||i.password.errors==null)&&i.password.errors.minlength?3:-1)}}function K(n,t){n&1&&l(0," \u8ACB\u78BA\u8A8D\u5BC6\u78BC ")}function O(n,t){n&1&&l(0," \u5169\u6B21\u5BC6\u78BC\u8F38\u5165\u4E0D\u4E00\u81F4 ")}function Q(n,t){if(n&1&&(a(0,"label",7)(1,"span",22),u(2,K,1,0),u(3,O,1,0),o()()),n&2){let i=c();r(2),s(!(i.confirmPassword==null||i.confirmPassword.errors==null)&&i.confirmPassword.errors.required?2:-1),r(),s(!(i.confirmPassword==null||i.confirmPassword.errors==null)&&i.confirmPassword.errors.passwordMismatch?3:-1)}}function U(n,t){n&1&&(m(0,"span",23),l(1," \u8A3B\u518A\u4E2D... "))}function W(n,t){n&1&&l(0," \u8A3B\u518A ")}var N=class n{fb=f(D);router=f(B);authStore=f(y);registerForm;constructor(){this.registerForm=this.fb.group({username:["",[d.required,d.minLength(3),d.maxLength(50)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator}),F(()=>{this.authStore.user()&&!this.authStore.isLoading()&&this.router.navigate(["/dashboard"])})}passwordMatchValidator(t){let i=t.get("password"),e=t.get("confirmPassword");return i&&e&&i.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.valid){let{username:t,email:i,password:e}=this.registerForm.value;this.authStore.register({username:t,email:i,password:e})}else this.registerForm.markAllAsTouched()}get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=w({type:n,selectors:[["app-register"]],decls:42,vars:18,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-base-200"],[1,"card","w-96","bg-base-100","shadow-xl"],[1,"card-body"],[1,"card-title","text-2xl","font-bold","text-center","justify-center","mb-4"],[1,"alert","alert-error"],[3,"ngSubmit","formGroup"],[1,"form-control","w-full"],[1,"label"],[1,"label-text"],["type","text","formControlName","username","placeholder","\u8ACB\u8F38\u5165\u4F7F\u7528\u8005\u540D\u7A31",1,"input","input-bordered","w-full"],[1,"form-control","w-full","mt-4"],["type","email","formControlName","email","placeholder","\u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6",1,"input","input-bordered","w-full"],["type","password","formControlName","password","placeholder","\u8ACB\u8F38\u5165\u5BC6\u78BC",1,"input","input-bordered","w-full"],["type","password","formControlName","confirmPassword","placeholder","\u8ACB\u518D\u6B21\u8F38\u5165\u5BC6\u78BC",1,"input","input-bordered","w-full"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"divider"],[1,"text-center"],[1,"text-sm"],["routerLink","/auth/login",1,"link","link-primary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"label-text-alt","text-error"],[1,"loading","loading-spinner"]],template:function(i,e){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4,"\u6703\u54E1\u8A3B\u518A"),o(),u(5,k,5,1,"div",4),a(6,"form",5),h("ngSubmit",function(){return e.onSubmit()}),a(7,"div",6)(8,"label",7)(9,"span",8),l(10,"\u4F7F\u7528\u8005\u540D\u7A31"),o()(),m(11,"input",9),u(12,G,5,3,"label",7),o(),a(13,"div",10)(14,"label",7)(15,"span",8),l(16,"\u96FB\u5B50\u90F5\u4EF6"),o()(),m(17,"input",11),u(18,I,4,2,"label",7),o(),a(19,"div",10)(20,"label",7)(21,"span",8),l(22,"\u5BC6\u78BC"),o()(),m(23,"input",12),u(24,J,4,2,"label",7),o(),a(25,"div",10)(26,"label",7)(27,"span",8),l(28,"\u78BA\u8A8D\u5BC6\u78BC"),o()(),m(29,"input",13),u(30,Q,4,2,"label",7),o(),a(31,"div",14)(32,"button",15),u(33,U,2,0)(34,W,1,0),o()(),a(35,"div",16),l(36,"\u6216"),o(),a(37,"div",17)(38,"p",18),l(39," \u5DF2\u7D93\u6709\u5E33\u865F\u4E86\uFF1F "),a(40,"a",19),l(41,"\u7ACB\u5373\u767B\u5165"),o()()()()()()()),i&2&&(r(5),s(e.authStore.error()?5:-1),r(),C("formGroup",e.registerForm),r(5),p("input-error",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),r(),s(e.username!=null&&e.username.invalid&&(e.username!=null&&e.username.touched)?12:-1),r(5),p("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),r(),s(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?18:-1),r(5),p("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),r(),s(e.password!=null&&e.password.invalid&&(e.password!=null&&e.password.touched)?24:-1),r(5),p("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),r(),s(e.confirmPassword!=null&&e.confirmPassword.invalid&&(e.confirmPassword!=null&&e.confirmPassword.touched)?30:-1),r(2),p("loading",e.authStore.isLoading()),C("disabled",e.authStore.isLoading()),r(),s(e.authStore.isLoading()?33:34))},dependencies:[T,A,S,E,x,P,R,b],encapsulation:2})};export{N as Register};
