import{a as x,b as p,c as L,d as E,e as y,f as A,g as T,h as k,i as N}from"./chunk-QB3HQZGH.js";import{a as D}from"./chunk-6SR4RIGY.js";import{D as n,H as v,M as u,N as d,O as g,P as o,Q as a,R as m,V as _,X as c,Y as f,Z as l,_ as F,ga as b,ma as w,oa as B,pa as S,s,t as C,u as h}from"./chunk-PNWZI6QW.js";function q(e,r){if(e&1&&(o(0,"div",4),C(),o(1,"svg",18),m(2,"path",19),a(),h(),o(3,"span"),l(4),a()()),e&2){let i=c();n(4),F(i.authStore.error())}}function M(e,r){e&1&&l(0," \u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6 ")}function P(e,r){e&1&&l(0," \u96FB\u5B50\u90F5\u4EF6\u683C\u5F0F\u4E0D\u6B63\u78BA ")}function j(e,r){if(e&1&&(o(0,"label",7)(1,"span",20),u(2,M,1,0),u(3,P,1,0),a()()),e&2){let i=c();n(2),d(!(i.email==null||i.email.errors==null)&&i.email.errors.required?2:-1),n(),d(!(i.email==null||i.email.errors==null)&&i.email.errors.email?3:-1)}}function R(e,r){e&1&&l(0," \u8ACB\u8F38\u5165\u5BC6\u78BC ")}function U(e,r){e&1&&l(0," \u5BC6\u78BC\u81F3\u5C11\u9700\u8981 6 \u500B\u5B57\u5143 ")}function V(e,r){if(e&1&&(o(0,"label",7)(1,"span",20),u(2,R,1,0),u(3,U,1,0),a()()),e&2){let i=c();n(2),d(!(i.password==null||i.password.errors==null)&&i.password.errors.required?2:-1),n(),d(!(i.password==null||i.password.errors==null)&&i.password.errors.minlength?3:-1)}}function I(e,r){e&1&&(m(0,"span",21),l(1," \u767B\u5165\u4E2D... "))}function z(e,r){e&1&&l(0," \u767B\u5165 ")}var G=class e{fb=s(k);router=s(B);route=s(w);authStore=s(D);loginForm;returnUrl="/dashboard";constructor(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard",b(()=>{this.authStore.user()&&!this.authStore.isLoading()&&this.router.navigate([this.returnUrl])})}onSubmit(){if(this.loginForm.valid){let{email:r,password:i}=this.loginForm.value;this.authStore.login({email:r,password:i})}else this.loginForm.markAllAsTouched()}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:30,vars:12,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-base-200"],[1,"card","w-96","bg-base-100","shadow-xl"],[1,"card-body"],[1,"card-title","text-2xl","font-bold","text-center","justify-center","mb-4"],[1,"alert","alert-error"],[3,"ngSubmit","formGroup"],[1,"form-control","w-full"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","\u8ACB\u8F38\u5165\u96FB\u5B50\u90F5\u4EF6",1,"input","input-bordered","w-full"],[1,"form-control","w-full","mt-4"],["type","password","formControlName","password","placeholder","\u8ACB\u8F38\u5165\u5BC6\u78BC",1,"input","input-bordered","w-full"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"divider"],[1,"text-center"],[1,"text-sm"],["routerLink","/auth/register",1,"link","link-primary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"h-6","w-6","shrink-0","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"label-text-alt","text-error"],[1,"loading","loading-spinner"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4,"\u6703\u54E1\u767B\u5165"),a(),u(5,q,5,1,"div",4),o(6,"form",5),_("ngSubmit",function(){return t.onSubmit()}),o(7,"div",6)(8,"label",7)(9,"span",8),l(10,"\u96FB\u5B50\u90F5\u4EF6"),a()(),m(11,"input",9),u(12,j,4,2,"label",7),a(),o(13,"div",10)(14,"label",7)(15,"span",8),l(16,"\u5BC6\u78BC"),a()(),m(17,"input",11),u(18,V,4,2,"label",7),a(),o(19,"div",12)(20,"button",13),u(21,I,2,0)(22,z,1,0),a()(),o(23,"div",14),l(24,"\u6216"),a(),o(25,"div",15)(26,"p",16),l(27," \u9084\u6C92\u6709\u5E33\u865F\uFF1F "),o(28,"a",17),l(29,"\u7ACB\u5373\u8A3B\u518A"),a()()()()()()()),i&2&&(n(5),d(t.authStore.error()?5:-1),n(),g("formGroup",t.loginForm),n(5),f("input-error",(t.email==null?null:t.email.invalid)&&(t.email==null?null:t.email.touched)),n(),d(t.email!=null&&t.email.invalid&&(t.email!=null&&t.email.touched)?12:-1),n(5),f("input-error",(t.password==null?null:t.password.invalid)&&(t.password==null?null:t.password.touched)),n(),d(t.password!=null&&t.password.invalid&&(t.password!=null&&t.password.touched)?18:-1),n(2),f("loading",t.authStore.isLoading()),g("disabled",t.authStore.isLoading()),n(),d(t.authStore.isLoading()?21:22))},dependencies:[N,y,x,L,E,A,T,S],encapsulation:2})};export{G as Login};
